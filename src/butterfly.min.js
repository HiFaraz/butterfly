"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var _slicedToArray=function(){function t(t,n){var e,r,a=[],o=!0,u=!1,i=void 0;try{for(e=t[Symbol.iterator]();!(o=(r=e.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(c){u=!0,i=c}finally{try{!o&&e.return&&e.return()}finally{if(u)throw i}}return a}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():t.butterfly=n()}(this,function(){function t(t){return t.data=Object.assign({},t.data||{},t.computed||{},t.methods||{}),t.__bindings={},t.__computed=[],a(t),o(t),t.data}function n(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n.reduce(function(n,a){if(!a.getAttribute||!a.hasAttribute("name")||c(a.getAttribute("name"))){var o=a.hasAttribute&&a.hasAttribute("name")&&""!==a.getAttribute("name")?f(r,a.getAttribute("name")):r;return n.concat("#text"===a.nodeName?A(a,e(t),o):C(a,e(t),o))}return n},[])}function e(t,n,e){function r(n,e,r){return void 0!==n.nodeName&&N[n.nodeName]?(-1===["LIST","#text"].indexOf(n.nodeName)&&r(),N[n.nodeName](t,n,e)||n):(r(),n)}return void 0===n?r:r(n,e)}function r(t){return t.template?E("#"===t.template[0]?document.querySelector(t.template).innerHTML:t.template):Array.from(document.getElementById(t.target.slice(1)).childNodes)}function a(t){g(r,function(e){return[t,n(t,e)]},function(t){var n=_slicedToArray(t,2),e=n[0],r=n[1];return h(e),[e,r]},function(t){var n=_slicedToArray(t,2),e=n[0],r=n[1];d(e,r),e.mounted&&e.mounted.call(e.data)})(t)}function o(t){t.__data=Object.assign({},t.data),t.data=new y(t.__data,{set:function(n,e,r,a,o){var u=s(t).apply(this,arguments);return t.updated&&t.updated.call(t.data,o,r),u}}),t.created&&t.created.call(t.data)}function u(t,n){return n.split(".").reduce(function(t,n){return void 0===t?void 0:t[n]},t)}function i(t,n){return t.reduce(function(t,e){return t.concat(e,n)},[]).slice(0,-1)}function c(t){return"constructor"!==t.slice(0,11)&&-1===t.indexOf(".constructor")}function f(t,n){return(t+(n?"."+n:"")).match(/[^\.].*/)[0]}function d(t,n){var e,r=document.getElementById(t.target.slice(1));l(r),e=document.createDocumentFragment(),n.forEach(e.appendChild.bind(e)),r.appendChild(e)}function l(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function m(t,n,e){var r=u(t.watch,n);"function"==typeof r&&r.call(t.data,e,u(t.__data,n))}function s(){function t(t,n,e,r,o,i){return i||m(a,o,e),"function"==typeof e&&(e=e.call(a.data)),a.__bindings[o]&&a.__bindings[o].forEach(function(t){t(e)}),!i&&a.__computed&&a.__computed.forEach(function(t){var n=(u(a.__data,t)||function(){}).call(a.__data);m(a,t,n),a.__bindings[t].forEach(function(t){t(n)})}),!0}var n,e,r,a;for(n=arguments.length,e=Array(n),r=0;n>r;r++)e[r]=arguments[r];return a=e[0],1===e.length?t:t.apply(void 0,_toConsumableArray(e.slice(1)))}function g(){for(var t=arguments.length,n=Array(t),e=0;t>e;e++)n[e]=arguments[e];return function(){var t,e,r,a=this;for(t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return n.reduce(function(t,n,e){var r=0==e?n.apply(a,t):n.call(a,t);return r},e)}}function h(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t.__bindings).forEach(function(e){if(0===e.indexOf(n)){var r=u(t.data,e);r&&s(t,null,null,r,null,e,!0)}}),t}function y(t,n,e,r){var a,o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!1;return void 0===r&&(r=""),a=u?t:Object.assign({},t),Object.keys(a).forEach(function(t){"object"===_typeof(a[t])&&(a[t]=y(a[t],n,e,r+"."+t,Array.isArray(a[t])))}),o=Object.assign({},n,{set:function(t,a,o,i){"object"===(void 0===o?"undefined":_typeof(o))?Reflect.set(t,a,y(o,n,e,f(r,a))):Reflect.set(t,a,o);var c=u?f(r):f(r,a);return!n.set||Array.isArray(t)&&"length"==a?!0:n.set(t,a,u?t:o,i,c)}}),new Proxy(a,o)}function p(t,n,e){var r=u(t.data,n);"function"==typeof r&&-1===t.__computed.indexOf(n)&&t.__computed.push(n),t.__bindings[n].push(e)}function b(t,n,e){function r(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),a=2;e>a;a++)r[a-2]=arguments[a];r.forEach(function(e){t[e]=n})}var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value",o=["onclick","onchange","onkeypress","oninput"],i=u(t.watch,n.getAttribute("name"));n.hasAttribute("no-bind")!==!1||t.watch!==!0&&i!==!0&&!n.hasAttribute("bind")||r.apply(void 0,[n,function(){n[a]!==u(t.data,e)&&v(t.data,e,n[a])}].concat(o))}function v(t,n,e){var r=t,a=n.split(".");a.slice(0,-1).forEach(function(t){r[t]||(r[t]={}),r=r[t]}),r[a.slice(-1)]=e}function A(t,n,e){var r=_(t);return Array.isArray(r)?(r.forEach(function(r){g(n,function(){t.parentNode.insertBefore(r,t)})(r,e)}),t.parentNode.removeChild(t),r):(n(t,e),t)}function _(t){function n(t,n){var e=n.reduce(function(t,n){return t.reduce(function(t,e){return t.concat(e===n?e:i(e.split(n),n))},[])},[t.textContent]).map(function(t){return document.createTextNode(t)});return e}var e=t.textContent.match(/{{(.+?)}}/g);return e?n(t,e):t}function E(t){var n=document.createElement("html");return n.innerHTML=t,Array.from(n.childNodes[1].childNodes)}function x(t,n){t.__bindings[n]=t.__bindings[n]||[]}function C(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n(t,e,function(){for(var r,a=t.firstChild;a;)a.getAttribute&&a.hasAttribute("name")&&!c(a.getAttribute("name"))||(r=a.hasAttribute&&a.hasAttribute("name")&&""!==a.getAttribute("name")?f(e,a.getAttribute("name")):e,"#text"===a.nodeName?A(a,n,r):C(a,n,r)),a=a.nextSibling})}var N={};return N.INPUT=function(t,n,e){if(n.getAttribute("name")){x(t,e);var r="checkbox"===n.getAttribute("type")?"checked":"value";p(t,e,function(t){n[r]!=t&&(n[r]=t)}),b(t,n,e,r)}},["RANGE","SELECT","TEXTAREA"].forEach(function(t){N[t]=function(t,n,e){n.getAttribute("name")&&(x(t,e),p(t,e,function(t){n.value!=t&&(n.value=t)}),b(t,n,e))}}),N.LIST=function(t,e,r){var a,o=e.parentNode,u=document.createElement("div");return e.getAttribute("name")&&(a=document.createDocumentFragment(),Array.from(e.cloneNode(!0).childNodes).forEach(a.appendChild.bind(a)),x(t,e.getAttribute("name")),p(t,e.getAttribute("name"),function(e){var o,i=u.children.length,c=e.length,f=c-i;0>f?Array.from(u.children).forEach(function(n,e){c>e?h(t,r+"."+e):u.removeChild(n)}):f>0&&(o=document.createDocumentFragment(),e.forEach(function(e,u){if(u<i)h(t,r+"."+u);else{var c=a.cloneNode(!0);n(t,Array.from(c.childNodes),r+"."+u),o.appendChild(c)}}),h(t,r+"."),u.appendChild(o))})),o.replaceChild(u,e),u},N.VALUE=function(t,n,e){n.getAttribute("name")&&(x(t,e),p(t,e,function(t){n.innerHTML!=t&&(n.innerHTML=t)}),n.innerHTML="")},N["#text"]=function(t,n,e){var r,a=n.textContent.match(/{{(.+?)}}/g);a&&(r=a[0].replace(/[{}]/g,"").trim(),c(f(e,r))&&(x(t,f(e,r)),p(t,f(e,r),function(t){n.nodeValue=t}),n.textContent=""))},t});