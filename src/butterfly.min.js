"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var _slicedToArray=function(){function t(t,n){var e,r,o=[],a=!0,i=!1,u=void 0;try{for(e=t[Symbol.iterator]();!(a=(r=e.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(c){i=!0,u=c}finally{try{!a&&e.return&&e.return()}finally{if(i)throw u}}return o}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():t.butterfly=n()}(this,function(){function t(t){return t.data=Object.assign({},t.data||{},t.computed||{},t.methods||{}),t.__bindings={},t.__computed=[],o(t),a(t),t.data}function n(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n.reduce(function(n,o){if(!o.getAttribute||!o.hasAttribute("name")||c(o.getAttribute("name"))){var a=o.hasAttribute&&o.hasAttribute("name")&&""!==o.getAttribute("name")?f(r,o.getAttribute("name")):r;return n.concat("#text"===o.nodeName?v(o,e(t),a):C(o,e(t),a))}return n},[])}function e(t,n,e){function r(n,e,r){return void 0!==n.nodeName&&N[n.nodeName]?(-1===["LIST","#text"].indexOf(n.nodeName)&&r(),N[n.nodeName](t,n,e)||n):(r(),n)}return void 0===n?r:r(n,e)}function r(t){return t.template?E("#"===t.template[0]?document.querySelector(t.template).innerHTML:t.template):Array.from(document.getElementById(t.target.slice(1)).childNodes)}function o(t){g(r,function(e){return[t,n(t,e)]},function(t){var n=_slicedToArray(t,2),e=n[0],r=n[1];return y(e),[e,r]},function(t){var n=_slicedToArray(t,2),e=n[0],r=n[1];d(e,r),e.mounted&&e.mounted.call(e.data)})(t)}function a(t){t.__data=Object.assign({},t.data),t.data=new p(t.__data,{set:function(n,e,r,o,a){var i=m(t).apply(this,arguments);return t.updated&&t.updated.call(t.data,a,r),i}}),t.created&&t.created.call(t.data)}function i(t,n){return n.split(".").reduce(function(t,n){return void 0===t?void 0:t[n]},t)}function u(t,n){return t.reduce(function(t,e){return t.concat(e,n)},[]).slice(0,-1)}function c(t){return"constructor"!==t.slice(0,11)&&-1===t.indexOf(".constructor")}function f(t,n){return(t+(n?"."+n:"")).match(/[^\.].*/)[0]}function d(t,n){var e,r=document.getElementById(t.target.slice(1));s(r),e=document.createDocumentFragment(),n.forEach(e.appendChild.bind(e)),r.appendChild(e)}function s(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function l(t,n,e){var r=i(t.watch,n);"function"==typeof r&&r.call(t.data,e,i(t.__data,n))}function m(){function t(t,n,e,r,a,u){return u||l(o,a,e),"function"==typeof e&&(e=e.call(o.data)),o.__bindings[a]&&o.__bindings[a].forEach(function(t){t(e)}),!u&&o.__computed&&o.__computed.forEach(function(t){var n=(i(o.__data,t)||function(){}).call(o.__data);l(o,t,n),o.__bindings[t].forEach(function(t){t(n)})}),!0}var n,e,r,o;for(n=arguments.length,e=Array(n),r=0;n>r;r++)e[r]=arguments[r];return o=e[0],1===e.length?t:t.apply(void 0,_toConsumableArray(e.slice(1)))}function g(){for(var t=arguments.length,n=Array(t),e=0;t>e;e++)n[e]=arguments[e];return function(){var t,e,r,o=this;for(t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return n.reduce(function(t,n,e){var r=0==e?n.apply(o,t):n.call(o,t);return r},e)}}function y(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t.__bindings).forEach(function(e){if(0===e.indexOf(n)){var r=i(t.data,e);r&&m(t,null,null,r,null,e,!0)}}),t}function p(t,n,e,r){var o,a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!1;return void 0===r&&(r=""),o=i?t:Object.assign({},t),Object.keys(o).forEach(function(t){"object"===_typeof(o[t])&&(o[t]=p(o[t],n,e,r+"."+t,Array.isArray(o[t])))}),a=Object.assign({},n,{set:function(o,a,u,c){i||"object"!==(void 0===u?"undefined":_typeof(u))||Array.isArray(u)?Reflect.set(o,a,u):Reflect.set(o,a,p(u,n,e,f(r,a))),Reflect.set(t,a,u);var d=i?f(r):f(r,a);return n.set?n.set(o,a,i?o:u,c,d):!0}}),new Proxy(o,a)}function b(t,n,e){var r=i(t.data,n);"function"==typeof r&&-1===t.__computed.indexOf(n)&&t.__computed.push(n),t.__bindings[n].push(e)}function h(t,n,e){function r(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;e>o;o++)r[o-2]=arguments[o];r.forEach(function(e){t[e]=n})}var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value",a=["onclick","onchange","onkeypress","oninput"],u=i(t.watch,n.getAttribute("name"));n.hasAttribute("no-bind")!==!1||t.watch!==!0&&u!==!0&&!n.hasAttribute("bind")||r.apply(void 0,[n,function(){n[o]!==i(t.data,e)&&_(t.data,e,n[o])}].concat(a))}function _(t,n,e){var r=t,o=n.split(".");o.slice(0,-1).forEach(function(t){r[t]||(r[t]={}),r=r[t]}),r[o.slice(-1)]=e}function v(t,n,e){var r=A(t);return Array.isArray(r)?(r.forEach(function(r){g(n,function(){t.parentNode.insertBefore(r,t)})(r,e)}),t.parentNode.removeChild(t),r):(n(t,e),t)}function A(t){function n(t,n){var e=n.reduce(function(t,n){return t.reduce(function(t,e){return t.concat(e===n?e:u(e.split(n),n))},[])},[t.textContent]).map(function(t){return document.createTextNode(t)});return e}var e=t.textContent.match(/{{(.+?)}}/g);return e?n(t,e):t}function E(t){var n=document.createElement("html");return n.innerHTML=t,Array.from(n.childNodes[1].childNodes)}function x(t,n){t.__bindings[n]=t.__bindings[n]||[]}function C(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return n(t,e,function(){for(var r,o=t.firstChild;o;)o.getAttribute&&o.hasAttribute("name")&&!c(o.getAttribute("name"))||(r=o.hasAttribute&&o.hasAttribute("name")&&""!==o.getAttribute("name")?f(e,o.getAttribute("name")):e,"#text"===o.nodeName?v(o,n,r):C(o,n,r)),o=o.nextSibling})}var N={};return N.INPUT=function(t,n,e){if(n.getAttribute("name")){x(t,e);var r="checkbox"===n.getAttribute("type")?"checked":"value";b(t,e,function(t){n[r]!=t&&(n[r]=t)}),h(t,n,e,r)}},["RANGE","SELECT","TEXTAREA"].forEach(function(t){N[t]=function(t,n,e){n.getAttribute("name")&&(x(t,e),b(t,e,function(t){n.value!=t&&(n.value=t)}),h(t,n,e))}}),N.LIST=function(t,e,r){var o,a=e.parentNode,i=document.createElement("div");return e.getAttribute("name")&&(o=document.createDocumentFragment(),Array.from(e.cloneNode(!0).childNodes).forEach(o.appendChild.bind(o)),x(t,e.getAttribute("name")),b(t,e.getAttribute("name"),function(e){s(i),e.forEach(function(e,a){var u=o.cloneNode(!0);n(t,Array.from(u.childNodes),r+"."+a),y(t,r+"."+a),i.appendChild(u)})})),a.replaceChild(i,e),i},N.VALUE=function(t,n,e){n.getAttribute("name")&&(x(t,e),b(t,e,function(t){n.innerHTML!=t&&(n.innerHTML=t)}),n.innerHTML="")},N["#text"]=function(t,n,e){var r,o=n.textContent.match(/{{(.+?)}}/g);o&&(r=o[0].replace(/[{}]/g,"").trim(),c(f(e,r))&&(x(t,f(e,r)),b(t,f(e,r),function(t){n.nodeValue=t}),n.textContent=""))},t});