"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,n){"function"==typeof define&&define.amd?define([],n):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=n():t.butterfly=n()}(this,function(){function t(t){return t.data=t.data||{},t.__bindings={},t.__computed=[],r(t),o(t),t.data}function n(t,n){function e(n){function e(n){function e(t,n){for(var e=arguments.length,r=Array(e>2?e-2:0),o=2;e>o;o++)r[o-2]=arguments[o];r.forEach(function(e){t[e]=n})}var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value",o=["onclick","onchange","onkeypress","oninput"],i=a(t.watch,n.getAttribute("name"));n.hasAttribute("no-bind")!==!1||t.watch!==!0&&i!==!0&&!n.hasAttribute("bind")||e.apply(void 0,[n,function(){n[r]!==a(t.data,n.getAttribute("name"))&&p(t.data,n.getAttribute("name"),n[r])}].concat(o))}var r={};return r.INPUT=function(n){if(n.getAttribute("name")){h(t,n.getAttribute("name"));var r="checkbox"===n.getAttribute("type")?"checked":"value";y(t,n.getAttribute("name"),function(t){n[r]!=t&&(n[r]=t)}),e(n,r)}},["RANGE","SELECT","TEXTAREA"].forEach(function(n){r[n]=function(n){n.getAttribute("name")&&(h(t,n.getAttribute("name")),y(t,n.getAttribute("name"),function(t){n.value!=t&&(n.value=t)}),e(n))}}),r.VALUE=function(n){n.getAttribute("name")&&(h(t,n.getAttribute("name")),y(t,n.getAttribute("name"),function(t){n.innerHTML!=t&&(n.innerHTML=t)}),n.innerHTML="")},r["#text"]=function(n){var e,r=n.textContent.match(/{{(.+?)}}/g);r&&(e=r[0].replace(/[{}]/g,"").trim(),h(t,e),y(t,e,function(t){n.nodeValue=t}),n.textContent="")},void 0!==n.nodeName&&r[n.nodeName]&&r[n.nodeName](n),n}return void 0===n?e:void e(n)}function e(t){return t.template?_("#"===t.template[0]?document.querySelector(t.template).innerHTML:t.template):Array.from(document.getElementById(t.target.slice(1)).childNodes)}function r(t){function r(e){return a=e.reduce(function(e,r){return e.concat("#text"===r.nodeName?g(r,n(t)):v(r,n(t)))},[]),t}function o(t){c(t,a),t.mounted&&t.mounted.call(t.data)}var a;s(e,r,l,o)(t)}function o(t){t.__data=Object.assign({},t.data),t.data=new m(t.__data,{set:d(t)}),"function"==typeof t.created&&t.created.call(t.data)}function a(t,n){return n.split(".").reduce(function(t,n){return void 0===t?void 0:t[n]},t)}function i(t,n){return t.reduce(function(t,e){return t.concat(e,n)},[]).slice(0,-1)}function u(t,n){return(t+"."+n).match(/[^\.].*/)[0]}function c(t,n){for(var e,r=document.getElementById(t.target.slice(1));r.firstChild;)r.removeChild(r.firstChild);e=document.createDocumentFragment(),n.forEach(e.appendChild.bind(e)),r.appendChild(e)}function f(t,n,e){var r=a(t.watch,n);"function"==typeof r&&r.call(t.data,e,a(t.__data,n))}function d(){function t(t,n,e,r,i,u){return u||f(o,i,e),"function"==typeof e&&(e=e.call(Object.assign({},o.__data))),o.__bindings[i]&&o.__bindings[i].forEach(function(t){t(e)}),!u&&o.__computed&&o.__computed.forEach(function(t){var n=(a(o.__data,t)||function(){}).bind(Object.assign({},o.__data));f(o,t,n),"function"==typeof n&&(n=n.call(Object.assign({},o.__data))),o.__bindings[t].forEach(function(t){t(n)})}),!0}var n,e,r,o;for(n=arguments.length,e=Array(n),r=0;n>r;r++)e[r]=arguments[r];return o=e[0],1===e.length?t:t.apply(void 0,_toConsumableArray(e.slice(1)))}function s(){for(var t=arguments.length,n=Array(t),e=0;t>e;e++)n[e]=arguments[e];return function(){var t,e,r,o=this;for(t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return n.reduce(function(t,n,e){var r=0==e?n.apply(o,t):n.call(o,t);return r},e)}}function l(t){return Object.keys(t.__bindings).forEach(function(n){var e=a(t.data,n);e&&d(t,null,null,e,null,n,!0)}),t}function m(t,n,e,r){var o,a;return void 0===r&&(r=""),o=Object.assign({},t),Object.keys(o).forEach(function(t){"object"!==_typeof(o[t])||Array.isArray(o[t])||(o[t]=m(o[t],n,e,r+"."+t))}),a=Object.assign({},n,{set:function(o,a,i,c){return"object"!==(void 0===i?"undefined":_typeof(i))||Array.isArray(i)?Reflect.set(o,a,i):Reflect.set(o,a,m(i,n,e,u(r,a))),Reflect.set(t,a,i),n.set?n.set(o,a,i,c,u(r,a)):!0}}),new Proxy(o,a)}function y(t,n,e){var r=a(t.data,n);"function"==typeof r&&-1===t.__computed.indexOf(n)&&t.__computed.push(n),t.__bindings[n].push(e)}function p(t,n,e){var r=t,o=n.split(".");o.slice(0,-1).forEach(function(t){r[t]||(r[t]={}),r=r[t]}),r[o.slice(-1)]=e}function g(t,n){var e=b(t);return Array.isArray(e)?(e.forEach(s(n,function(n){t.parentNode.insertBefore(n,t)})),t.parentNode.removeChild(t),e):(n(t),t)}function b(t){function n(t,n){var e=n.reduce(function(t,n){return t.reduce(function(t,e){return t.concat(e===n?e:i(e.split(n),n))},[])},[t.textContent]).map(function(t){return document.createTextNode(t)});return e}var e=t.textContent.match(/{{(.+?)}}/g);return e?n(t,e):t}function _(t){return Array.from((new DOMParser).parseFromString(t,"text/html").body.childNodes)}function h(t,n){t.__bindings[n]=t.__bindings[n]||[]}function v(t,n){n(t);for(var e=t.firstChild;e;)"#text"===e.nodeName?g(e,n):v(e,n),e=e.nextSibling;return t}return t});