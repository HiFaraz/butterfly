"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var _slicedToArray=function(){function t(t,e){var n,r,a=[],i=!0,o=!1,u=void 0;try{for(n=t[Symbol.iterator]();!(i=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);i=!0);}catch(c){o=!0,u=c}finally{try{!i&&n.return&&n.return()}finally{if(o)throw u}}return a}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.butterfly=e()}(this,function(){function t(t){return t.data=Object.assign({},t.data||{},t.computed||{},t.methods||{}),t.__bindings={},t.__computed=[],a(t),i(t),t.data}function e(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.reduce(function(e,a){if(!a.getAttribute||!a.hasAttribute("name")||u(a.getAttribute("name"))){var i=a.hasAttribute&&a.hasAttribute("name")&&""!==a.getAttribute("name")?c(r,a.getAttribute("name")):r;return e.concat("#text"!==a.nodeName?_(a,n(t),i):a)}return e},[])}function n(t,e,n){function r(e,n,r){return void 0!==e.nodeName&&E[e.nodeName]?(-1===["LIST","#text"].indexOf(e.nodeName)&&r(),E[e.nodeName](t,e,n)||e):(r(),e)}return void 0===e?r:r(e,n)}function r(t){return A(t.template?"#"===t.template[0]?document.querySelector(t.template).innerHTML:t.template:document.getElementById(t.target.slice(1)).innerHTML)}function a(t){m(r,function(n){return[t,e(t,n)]},function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1];return g(n),[n,r]},function(t){var e=_slicedToArray(t,2),n=e[0],r=e[1];f(n,r),n.mounted&&n.mounted.call(n.data)})(t)}function i(t){t.__data=Object.assign({},t.data),t.data=new h(t.__data,{set:function(e,n,r,a,i){var o=s(t).apply(this,arguments);return t.updated&&t.updated.call(t.data,i,r),o}}),t.created&&t.created.call(t.data)}function o(t,e){return e.split(".").reduce(function(t,e){return void 0===t?void 0:t[e]},t)}function u(t){return"constructor"!==t.slice(0,11)&&-1===t.indexOf(".constructor")}function c(t,e){return(t+(e?"."+e:"")).match(/[^\.].*/)[0]}function f(t,e){var n,r=document.getElementById(t.target.slice(1));d(r),n=document.createDocumentFragment(),e.forEach(n.appendChild.bind(n)),r.appendChild(n)}function d(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function l(t,e,n){var r=o(t.watch,e);"function"==typeof r&&r.call(t.data,n,o(t.__data,e))}function s(){function t(t,e,n,r,i,u){return u||l(a,i,n),"function"==typeof n&&(n=n.call(a.data)),a.__bindings[i]&&a.__bindings[i].forEach(function(t){t(n)}),!u&&a.__computed&&a.__computed.forEach(function(t){var e=(o(a.__data,t)||function(){}).call(a.__data);l(a,t,e),a.__bindings[t].forEach(function(t){t(e)})}),!0}var e,n,r,a;for(e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return a=n[0],1===n.length?t:t.apply(void 0,_toConsumableArray(n.slice(1)))}function m(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return function(){var t,n,r,a=this;for(t=arguments.length,n=Array(t),r=0;t>r;r++)n[r]=arguments[r];return e.reduce(function(t,e,n){var r=0==n?e.apply(a,t):e.call(a,t);return r},n)}}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(t.__bindings).forEach(function(n){if(0===n.indexOf(e)){var r=o(t.data,n);r&&s(t,null,null,r,null,n,!0)}}),t}function h(t,e,n,r){var a,i,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!1;return void 0===r&&(r=""),a=o?t:Object.assign({},t),Object.keys(a).forEach(function(t){"object"===_typeof(a[t])&&(a[t]=h(a[t],e,n,r+"."+t,Array.isArray(a[t])))}),i=Object.assign({},e,{set:function(t,a,i,u){"object"===(void 0===i?"undefined":_typeof(i))?Reflect.set(t,a,h(i,e,n,c(r,a))):Reflect.set(t,a,i);var f=o?c(r):c(r,a);return!e.set||Array.isArray(t)&&"length"==a?!0:e.set(t,a,o?t:i,u,f)}}),new Proxy(a,i)}function b(t,e,n){var r=o(t.data,e);"function"==typeof r&&-1===t.__computed.indexOf(e)&&t.__computed.push(e),t.__bindings[e].push(n)}function y(t,e,n){function r(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),a=2;n>a;a++)r[a-2]=arguments[a];r.forEach(function(n){t[n]=e})}var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"value",i=["onclick","onchange","onkeypress","oninput"],u=o(t.watch,e.getAttribute("name"));e.hasAttribute("no-bind")!==!1||t.watch!==!0&&u!==!0&&!e.hasAttribute("bind")||r.apply(void 0,[e,function(){e[a]!==o(t.data,n)&&p(t.data,n,e[a])}].concat(i))}function p(t,e,n){var r=t,a=e.split(".");a.slice(0,-1).forEach(function(t){r[t]||(r[t]={}),r=r[t]}),r[a.slice(-1)]=n}function A(t){var e=document.createElement("html");return e.innerHTML=t.replace(/{{(.+?)}}/g,function(t,e){return'<span name="'+e.trim()+'"></span>'}),Array.from(e.childNodes[1].childNodes)}function v(t,e){t.__bindings[e]=t.__bindings[e]||[]}function _(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e(t,n,function(){for(var r,a=t.firstChild;a;)a.getAttribute&&a.hasAttribute("name")&&!u(a.getAttribute("name"))||(r=a.hasAttribute&&a.hasAttribute("name")&&""!==a.getAttribute("name")?c(n,a.getAttribute("name")):n,_(a,e,r)),a=a.nextSibling})}var E={};return E.INPUT=function(t,e,n){if(e.getAttribute("name")){v(t,n);var r="checkbox"===e.getAttribute("type")?"checked":"value";b(t,n,function(t){e[r]!=t&&(e[r]=t)}),y(t,e,n,r)}},["RANGE","SELECT","TEXTAREA"].forEach(function(t){E[t]=function(t,e,n){e.getAttribute("name")&&(v(t,n),b(t,n,function(t){e.value!=t&&(e.value=t)}),y(t,e,n))}}),E.LIST=function(t,n,r){var a,i=n.parentNode,o=document.createElement("div");return o.setAttribute("list",r),n.getAttribute("name")&&(a=document.createDocumentFragment(),Array.from(n.cloneNode(!0).childNodes).forEach(a.appendChild.bind(a)),v(t,n.getAttribute("name")),b(t,n.getAttribute("name"),function(n){var i,u,c,f=o.children.length,d=n.length;if(0>d-f)Array.from(o.children).forEach(function(e,n){d>n?g(t,r+"."+n):o.removeChild(e)});else if(d-f>0){for(i=document.createDocumentFragment(),c=f;d>c;c++)u=a.cloneNode(!0),Array.from(u.childNodes).forEach(function(t){t.hasAttribute&&t.setAttribute("name","".concat(c,t.hasAttribute("name")?"."+t.getAttribute("name"):""))}),i.appendChild(u);e(t,Array.from(i.childNodes),""+r),g(t,r+"."),o.appendChild(i)}})),i.replaceChild(o,n),o},E.SPAN=function(t,e,n){e.getAttribute("name")&&(v(t,n),b(t,n,function(t){e.innerHTML!=t&&(e.innerHTML=t)}),e.innerHTML="")},t});